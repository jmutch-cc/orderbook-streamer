{"version":3,"sources":["components/Header.js","services/OrderbookService.js","components/OrderbookStreamer/Subscription.js","services/Utils.js","components/OrderbookStreamer/Stats.js","components/OrderbookStreamer/OrderRow.js","components/OrderbookStreamer/OrderTable.js","components/OrderbookStreamer/Display.js","components/OrderbookStreamer/OrderbookStreamer.js","App.js","serviceWorker.js","index.js"],"names":["Header","props","className","style","overflowX","title","defaultProps","OrderbookService","snapshot","0","1","lastUpdated","depth","clientUrl","list","type","desc","res","ordered","i","length","value","Number","volume","sort","a","b","totalvolume","to","from","dp","Object","keys","forEach","key","callback","BID","map","item","P","Q","String","ASK","orders","this","getSnapshot","bidKeys","slice","topBids","bidKey","push","askKeys","topAsks","askKey","processData","update","ACTION","SIDE","undefined","console","error","exchange","fSym","tSym","url","apiKey","log","client","W3CWebSocket","onopen","send","JSON","stringify","action","subs","onmessage","message","data","msg","parse","TYPE","populateSnapshot","updateSnapshot","currency","resetLastUpdated","resetSnapshot","close","Subscription","selectExchange","bind","selectFsym","selectTsym","subscribe","changeSubscriptionKey","changeClientUrl","changeApiKey","state","exchanges","fSyms","tSyms","subscriptionKey","axios","get","then","orderbookRes","orderbookExchanges","Data","setState","pairs","tsyms","autoSubscribe","e","target","placeholder","onChange","required","name","id","float","width","paddingTop","onClick","Component","Utils","number","decimalPlaces","k","formattedNumber","toFixed","numeral","format","repeat","toString","utils","Stats","handleChange","priceImpactVolume","toggleState","toggleDirection","updated","toggle","direction","stats","spread","midpoint","high","low","bids","asks","impact","buy","sell","averageBuyPrice","averageSellPrice","lastBid","firstAsk","parseFloat","percentage","getSpread","lowerLimit","upperLimit","bidDepthVolFrom","bidDepthVolTo","bid","bidsMap","bidsvolume","askDepthVolFrom","askDepthVolTo","ask","asksMap","asksvolume","average","bidAverage","bidTotalVol","askAverage","askTotalVol","side","bidstotalvolume","askstotalvolume","Math","min","getDepth","getPriceImpact","getStats","checked","htmlFor","formatNumber","OrderRow","indexOf","order","c","setTimeout","price","tsymPrice","totalVolume","OrderTable","containerHeight","elementHeight","getTableRows","Display","orderbookService","OrderbookStreamer","changeSubscription","currentComponent","setInterval","prevState","getLastUpdated","parts","split","unsubscribe","App","search","window","location","params","URLSearchParams","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2fd020b8.chunk.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst Header = (props) => (\r\n    <nav className=\"header navbar navbar-dark bg-dark\" style={{overflowX: 'hidden'}}>\r\n        <div className=\"text-center mx-auto\">\r\n            <div className=\"\">\r\n                <div className=\"h3 ml-3 my-auto text-light d-inline-block\">{props.title}</div>\r\n            </div>\r\n        </div>\r\n    </nav>\r\n);\r\n\r\nHeader.defaultProps = {\r\n    title: 'App'\r\n};\r\n\r\nHeader.propTypes = {\r\n    title: PropTypes.string\r\n};\r\n\r\nexport { Header };","import { w3cwebsocket as W3CWebSocket } from \"websocket\";\r\nconst clientUrl = 'wss://streamer.cryptocompare.com/v2';\r\n// let client = new W3CWebSocket(clientUrl);\r\n\r\nexport class OrderbookService {\r\n\r\n    snapshot = {0:{},1:{}};\r\n    lastUpdated = [];\r\n    depth = 2000000;\r\n    clientUrl = clientUrl;\r\n    client;\r\n\r\n    processData(list, type, desc) {\r\n        // Convert to data points\r\n        let res = {};\r\n        let ordered = {};\r\n        for(let i = 0; i < list.length; i++) {\r\n            list[i] = {\r\n                value: Number(list[i]['P']),\r\n                volume: Number(list[i][['Q']]),\r\n            }\r\n        }\r\n        // Sort list just in case\r\n        list.sort(function(a, b) {\r\n            if (a.value > b.value) {\r\n                return 1;\r\n            }\r\n            else if (a.value < b.value) {\r\n                return -1;\r\n            }\r\n            else {\r\n                return 0;\r\n            }\r\n        });\r\n        // Calculate cummulative volume\r\n        if (desc) {\r\n            for(let i = list.length - 1; i >= 0; i--) {\r\n                if (i < (list.length - 1)) {\r\n                    list[i].totalvolume = {\r\n                        to: list[i+1].totalvolume.to + list[i].volume,\r\n                        from: list[i+1].totalvolume.from + (list[i].volume * list[i].value)\r\n                    };\r\n                }\r\n                else {\r\n                    list[i].totalvolume = {\r\n                        to: list[i].volume,\r\n                        from: list[i].volume * list[i].value\r\n                    };\r\n                }\r\n                let dp = {};\r\n                dp[\"value\"] = list[i].value;\r\n                dp[type + \"volume\"] = list[i].volume;\r\n                dp[type + \"totalvolume\"] = list[i].totalvolume;\r\n                res[list[i].value*100] = dp;\r\n            }\r\n            ordered = {};\r\n            Object.keys(res).sort(function (a, b) {\r\n                return a-b;\r\n            }).forEach(function(key) {\r\n                ordered[key] = res[key];\r\n            });\r\n        }\r\n        else {\r\n            for(let i = 0; i < list.length; i++) {\r\n                if (i > 0) {\r\n                    list[i].totalvolume = {\r\n                        to: list[i-1].totalvolume.to + list[i].volume,\r\n                        from: list[i-1].totalvolume.from + (list[i].volume * list[i].value)\r\n                    };\r\n                }\r\n                else {\r\n                    list[i].totalvolume = {\r\n                        to: list[i].volume,\r\n                        from: list[i].volume * list[i].value\r\n                    };\r\n                }\r\n                let dp = {};\r\n                dp[\"value\"] = list[i].value;\r\n                dp[type + \"volume\"] = list[i].volume;\r\n                dp[type + \"totalvolume\"] = list[i].totalvolume;\r\n                res[list[i].value*100] = dp\r\n            }\r\n            ordered = {};\r\n            Object.keys(res).sort(function (a, b) {\r\n                return b-a;\r\n            }).forEach(function(key) {\r\n                ordered[key] = res[key];\r\n            });\r\n        }\r\n        return ordered;\r\n    }\r\n\r\n    populateSnapshot(snapshot, callback) {\r\n        snapshot.BID.map((item, key) => {\r\n            this.snapshot[0][item.P*100] = {\r\n                Q: item.Q,\r\n                P: String(item.P)\r\n            };\r\n        });\r\n        snapshot.ASK.map((item, key) => {\r\n            this.snapshot[1][item.P*100] = {\r\n                Q: item.Q,\r\n                P: String(item.P)\r\n            };\r\n        });\r\n        callback({orders: this.getSnapshot(), lastUpdated: this.lastUpdated});\r\n    }\r\n\r\n    getLastUpdated(){\r\n        return this.lastUpdated;\r\n    }\r\n    resetLastUpdated(){\r\n        this.lastUpdated = [];\r\n    }\r\n    resetSnapshot() {\r\n        this.snapshot = {0: {}, 1: {}};\r\n    }\r\n    getSnapshot(){\r\n        let bidKeys = Object.keys(this.snapshot[0]).sort().slice(-this.depth);\r\n        let topBids = [];\r\n        for(let bidKey of bidKeys){\r\n            topBids.push(this.snapshot[0][bidKey]);\r\n        }\r\n        let askKeys = Object.keys(this.snapshot[1]).slice(0,this.depth);\r\n        let topAsks = [];\r\n        for(let askKey of askKeys){\r\n            topAsks.push(this.snapshot[1][askKey]);\r\n        }\r\n        let bids = this.processData(topBids, 'bids', true);\r\n        let asks = this.processData(topAsks, 'asks',  false);\r\n        return {0: bids, 1: asks};\r\n    }\r\n\r\n    updateSnapshot(update, callback){\r\n        if(update.ACTION === 1){\r\n            this.snapshot[update.SIDE][update.P*100] = {'P': update.P, 'Q': update.Q};\r\n            this.lastUpdated.push(update.P);\r\n        }\r\n        if(this.snapshot[update.SIDE][update.P*100] === undefined){\r\n            console.error(\"No price \", update.P, \" found on side \", update.SIDE, ' to perform action ', update.ACTION);\r\n            return;\r\n        }\r\n        if(update.ACTION === 2){\r\n           delete this.snapshot[update.SIDE][update.P*100];\r\n        }\r\n        if(update.ACTION === 4){\r\n            this.snapshot[update.SIDE][update.P*100]['Q'] = update.Q;\r\n            this.lastUpdated.push(update.P);\r\n        }\r\n    }\r\n\r\n    subscribe(exchange, fSym, tSym, url, apiKey, callback) {\r\n        console.log('Subscribing',exchange, tSym, fSym, this.client);\r\n        this.client = new W3CWebSocket(url + '?api_key=' + apiKey);\r\n        this.client.onopen = () => {\r\n            this.client.send(JSON.stringify({\r\n                action: 'SubAdd',\r\n                subs: ['8~'+exchange+'~'+fSym+'~'+tSym],\r\n            }));\r\n        };\r\n        this.client.onmessage = (message) => {\r\n            if(message.data){\r\n                let msg = JSON.parse(message.data);\r\n                if(msg.TYPE === '9'){\r\n                    this.populateSnapshot(msg, callback);\r\n                }\r\n                if(msg.TYPE === '8'){\r\n                    this.updateSnapshot(msg);\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n    unsubscribe(currency) {\r\n        this.resetLastUpdated();\r\n        this.resetSnapshot();\r\n        if(this.client != null){\r\n            this.client.close();\r\n            this.client = null;\r\n        }\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport axios from 'axios';\r\nimport {OrderbookService} from './../../services/OrderbookService';\r\nconst orderbookService = new OrderbookService();\r\n\r\nclass Subscription extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.selectExchange = this.selectExchange.bind(this);\r\n        this.selectFsym = this.selectFsym.bind(this);\r\n        this.selectTsym = this.selectTsym.bind(this);\r\n        this.subscribe = this.subscribe.bind(this);\r\n        this.changeSubscriptionKey = this.changeSubscriptionKey.bind(this);\r\n        this.changeClientUrl = this.changeClientUrl.bind(this);\r\n        this.changeApiKey = this.changeApiKey.bind(this);\r\n\r\n        this.state = {\r\n            exchanges: {},\r\n            fSyms: {},\r\n            tSyms: {},\r\n            fSym: props.fSym,\r\n            tSym: props.tSym,\r\n            subscriptionKey: '',\r\n            clientUrl: props.clientUrl,\r\n            apiKey: props.apiKey,\r\n            exchange: props.exchange,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('https://min-api.cryptocompare.com/data/ob/l2/exchanges?api_key='+this.state.apiKey).then(orderbookRes => {\r\n            axios.get('https://min-api.cryptocompare.com/data/v4/all/exchanges')\r\n                .then(res => {\r\n                    let orderbookExchanges = {};\r\n                    for(let exchange of orderbookRes.data.Data){\r\n                        orderbookExchanges[exchange] = res.data.Data.exchanges[exchange];\r\n                    }\r\n                    this.setState({ exchanges: orderbookExchanges });\r\n                    this.setState({\r\n                        fSyms: this.state.exchanges[this.state.exchange].pairs,\r\n                        tSyms: this.state.exchanges[this.state.exchange].pairs[this.state.fSym].tsyms\r\n                    }, () => {\r\n                        this.setState({\r\n                                subscriptionKey: this.state.exchange + '~' + this.state.fSym + '~' + this.state.tSym\r\n                            },() => {\r\n                            if(this.props.autoSubscribe){\r\n                                this.subscribe();\r\n                            }\r\n                        });\r\n                    })\r\n                });\r\n            });\r\n    }\r\n\r\n    selectExchange(e){\r\n        let exchange = e.target.value;\r\n        let pairs = this.state.exchanges[exchange].pairs;\r\n        this.setState({\r\n            exchange: exchange,\r\n            fSyms: pairs,\r\n            tSyms: pairs[Object.keys(pairs)[0]].tsyms,\r\n            fSym: Object.keys(pairs)[0],\r\n            tSym: Object.keys(pairs[Object.keys(pairs)[0]].tsyms)[0]\r\n        }, () => {\r\n            this.setState({subscriptionKey: this.state.exchange + '~' + this.state.fSym + '~' + this.state.tSym});\r\n            console.log(this.state.subscriptionKey);\r\n        })\r\n    }\r\n\r\n    selectFsym(e){\r\n        let fSym = e.target.value;\r\n        let pairs = this.state.exchanges[this.state.exchange].pairs;\r\n        this.setState({\r\n            fSym: fSym,\r\n            tSyms: pairs[fSym].tsyms,\r\n            tSym: Object.keys(pairs[fSym].tsyms)[0]\r\n        }, () => {\r\n            this.setState({subscriptionKey: this.state.exchange + '~' + this.state.fSym + '~' + this.state.tSym});\r\n        });\r\n    }\r\n\r\n    selectTsym(e){\r\n        let tSym = e.target.value;\r\n        this.setState({ tSym: tSym},() => {\r\n            this.setState({subscriptionKey: this.state.exchange + '~' + this.state.fSym + '~' + this.state.tSym});\r\n        });\r\n    }\r\n\r\n    changeSubscriptionKey(e){\r\n        this.setState({ subscriptionKey: e.target.value});\r\n    }\r\n\r\n    changeClientUrl(e){\r\n        this.setState({ clientUrl: e.target.value});\r\n    }\r\n\r\n    changeApiKey(e){\r\n        this.setState({ apiKey: e.target.value});\r\n    }\r\n\r\n    subscribe(){\r\n        this.props.subscribe(this.state.subscriptionKey, this.state.clientUrl, this.state.apiKey);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={\"subscription\"}>\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-md-2\"}></div>\r\n                    <div className={\"col-md-4\"}>\r\n                        <input className={\"form-control\"} placeholder={\"Streamer URL\"} onChange={this.changeClientUrl} value={this.state.clientUrl}></input>\r\n                    </div>\r\n                    <div className={\"col-md-4\"}>\r\n                        <input className={\"form-control\"} type={\"text\"} placeholder={\"API Key\"} onChange={this.changeApiKey} required value={this.state.apiKey}></input>\r\n                    </div>\r\n                </div>\r\n                <div className=\"subscription row\">\r\n                    <div className={\"col-md-2\"} />\r\n                    <select className={\"browser-default custom-select col-md\"} value={this.state.exchange} onChange={this.selectExchange} name=\"exchanges\" id=\"exchanges\">\r\n                        {Object.keys(this.state.exchanges).map(exchange =>\r\n                            <option key={exchange}>{exchange}</option>\r\n                        )}\r\n                    </select>\r\n                    <select className={\"browser-default custom-select col-md\"} value={this.state.fSym} onChange={this.selectFsym} name=\"fSym\" id=\"fSym\">\r\n                        {Object.keys(this.state.fSyms).map(fSym =>\r\n                            <option key={fSym}>{fSym}</option>\r\n                        )}\r\n                    </select>\r\n                    <select className={\"browser-default custom-select col-md\"} value={this.state.tSym} onChange={this.selectTsym} name=\"tSym\" id=\"tSym\">\r\n                        {Object.keys(this.state.tSyms).map(tSym =>\r\n                            <option key={tSym}>{tSym}</option>\r\n                        )}\r\n                    </select>\r\n                    <div className={\"col-md-2\"} />\r\n                </div>\r\n                <div className={\"row\"}>\r\n                    <div className={\"col-md-4\"}></div>\r\n                    <div className={\"col-md-3\"}>\r\n                        <input style={{float: \"right\", width: \"80%\"}} className={\"form-control\"} type={\"text\"} onChange={this.changeSubscriptionKey} placeholder={\"Subscription Key\"} value={this.state.subscriptionKey}></input>\r\n                        <div style={{float:\"right\", paddingTop:\"10px\"}}>8~</div>\r\n                    </div>\r\n                    <div className={\"col-md-1\"}>\r\n                        <span onClick={this.subscribe}>\r\n                            <button type=\"button\" className=\"btn btn-primary\">Subscribe</button>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nSubscription.propTypes = {\r\n    subscribe: PropTypes.func.isRequired,\r\n};\r\n\r\nexport { Subscription };","import numeral from \"numeral\";\r\n\r\nexport class Utils {\r\n    formatNumber(number, decimalPlaces, k){\r\n        let formattedNumber = +number.toFixed(8);\r\n        if(formattedNumber > 10000 && k){\r\n            formattedNumber = numeral(formattedNumber).format(\"0,0.\"+\"0\".repeat(decimalPlaces)+\"a\");\r\n        } else {\r\n            formattedNumber = numeral(formattedNumber).format(\"0,0.\"+\"0\".repeat(decimalPlaces));\r\n        }\r\n        return formattedNumber.toString();\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport { Utils } from '../../services/Utils';\r\nimport PropTypes from 'prop-types';\r\nimport 'font-awesome/css/font-awesome.min.css';\r\n\r\nconst utils = new Utils();\r\n\r\nclass Stats extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.toggleState = this.toggleState.bind(this);\r\n        this.toggleDirection = this.toggleDirection.bind(this);\r\n        this.state = {\r\n            updated: false,\r\n            priceImpactVolume: 10,\r\n            toggle: 'sell',\r\n            direction: 'to'\r\n        };\r\n        this.stats = {\r\n            spread: {\r\n                midpoint: 0,\r\n                high: 0,\r\n                low: 0\r\n            },\r\n            depth: {\r\n                bids: {},\r\n                asks: {}\r\n            },\r\n            impact: {\r\n                buy: 0,\r\n                sell: 0,\r\n                averageBuyPrice: 0,\r\n                averageSellPrice: 0\r\n            },\r\n        }\r\n    }\r\n\r\n    toggleState(e) {\r\n        this.setState({\r\n            toggle: e.target.value\r\n        });\r\n    }\r\n    toggleDirection(e) {\r\n        this.setState({\r\n            direction: e.target.value\r\n        });\r\n    }\r\n\r\n    getSpread(bids, asks){\r\n        let lastBid = bids[0]/100;\r\n        let firstAsk = asks[0]/100;\r\n        let midpoint = parseFloat(lastBid) + ((firstAsk - lastBid )/ 2);\r\n        return {\r\n            high: lastBid,\r\n            low: firstAsk,\r\n            midpoint: midpoint\r\n        }\r\n    }\r\n\r\n    getDepth(bids, asks, percentage){\r\n        let midpoint = this.getSpread(bids, asks).midpoint;\r\n        let lowerLimit = midpoint - (midpoint*(percentage/100));\r\n        let upperLimit = midpoint + (midpoint*(percentage/100));\r\n\r\n        let bidDepthVolFrom = 0;\r\n        let bidDepthVolTo = 0;\r\n        for(let bid of bids){\r\n            if(bid/100 > lowerLimit){\r\n                bidDepthVolFrom += this.bidsMap[bid].bidsvolume;\r\n                bidDepthVolTo += this.bidsMap[bid].bidsvolume*this.bidsMap[bid].value;\r\n            }\r\n        }\r\n        let askDepthVolFrom = 0;\r\n        let askDepthVolTo = 0;\r\n        for(let ask of asks){\r\n            if(ask/100 < upperLimit){\r\n                askDepthVolFrom += this.asksMap[ask].asksvolume;\r\n                askDepthVolTo += this.asksMap[ask].asksvolume*this.asksMap[ask].value;\r\n            }\r\n        }\r\n        return {\r\n            sell :{\r\n                to: bidDepthVolTo,\r\n                from: bidDepthVolFrom\r\n            },\r\n            buy :{\r\n                to: askDepthVolTo,\r\n                from: askDepthVolFrom\r\n            }\r\n        }\r\n    }\r\n\r\n    getPriceImpact(bids, asks){\r\n        let impact = {buy: 0, sell:0, average:{buy: 0, sell:0}};\r\n        if(!this.state.priceImpactVolume){\r\n            return impact;\r\n        }\r\n        let midpoint = this.getSpread(bids, asks).midpoint;\r\n        let bidAverage =0, bidTotalVol = 0;\r\n        let askAverage =0, askTotalVol = 0;\r\n        let side = this.state.direction;\r\n        for(let bid of bids){\r\n            impact.sell = this.bidsMap[bid].value - midpoint;\r\n            if(this.bidsMap[bid].bidstotalvolume[side] > this.state.priceImpactVolume) {\r\n                bidAverage += (this.state.priceImpactVolume - bidTotalVol) * this.bidsMap[bid].value;\r\n                bidTotalVol = this.bidsMap[bid].bidstotalvolume[side];\r\n                break;\r\n            }\r\n            bidTotalVol = this.bidsMap[bid].bidstotalvolume.to;\r\n            bidAverage += (this.bidsMap[bid].bidsvolume * this.bidsMap[bid].value);\r\n        }\r\n        for(let ask of asks){\r\n            impact.buy = this.asksMap[ask].value - midpoint;\r\n            if(this.asksMap[ask].askstotalvolume[side] > this.state.priceImpactVolume) {\r\n                askAverage += ((this.state.priceImpactVolume - askTotalVol) * this.asksMap[ask].value)\r\n                askTotalVol = this.asksMap[ask].askstotalvolume[side];\r\n                break;\r\n            }\r\n            askTotalVol = this.asksMap[ask].askstotalvolume[side];\r\n            askAverage += (this.asksMap[ask].asksvolume * this.asksMap[ask].value);\r\n        }\r\n        impact.average = {\r\n            sell: bidAverage / Math.min(bidTotalVol, this.state.priceImpactVolume),\r\n            buy: askAverage / Math.min(askTotalVol, this.state.priceImpactVolume)\r\n        };\r\n        return impact;\r\n    }\r\n\r\n    getStats(){\r\n        let stats = {};\r\n        this.bidsMap = this.props.orders[0];\r\n        this.asksMap = this.props.orders[1];\r\n        let bids = Object.keys(this.props.orders[0]);\r\n        let asks = Object.keys(this.props.orders[1]);\r\n        bids.sort(function (a, b) {\r\n            return b - a;\r\n        });\r\n        asks.sort(function (a, b) {\r\n            return a - b;\r\n        });\r\n        stats.spread = this.getSpread(bids, asks);\r\n        stats.depth = this.getDepth(bids, asks, 10);\r\n        stats.impact = this.getPriceImpact(bids, asks, 0.5);\r\n        this.stats = stats;\r\n    }\r\n\r\n    handleChange = (e) =>{\r\n        this.setState({priceImpactVolume: e.target.value});\r\n    }\r\n\r\n    render() {\r\n        if(!this.props.orders || !Object.keys(this.props.orders[0]).length || !Object.keys(this.props.orders[0]).length){\r\n            return <div />;\r\n        }\r\n        this.getStats();\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"panel-body\">\r\n                    {/*<Chart bids={this.props.orders[0] ? Object.values(this.props.orders[0]): []} asks={this.props.orders[1] ? Object.values(this.props.orders[1]): []} />*/}\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md\">\r\n                            <form className=\"switch-field\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    id=\"switch_left\"\r\n                                    name=\"switchToggle\"\r\n                                    value=\"buy\"\r\n                                    onChange={this.toggleState}\r\n                                    checked={this.state.toggle==='buy'}\r\n                                />\r\n                                <label htmlFor=\"switch_left\">Buy</label>\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    id=\"switch_right\"\r\n                                    name=\"switchToggle\"\r\n                                    value=\"sell\"\r\n                                    onChange={this.toggleState}\r\n                                    checked={this.state.toggle==='sell'}\r\n                                />\r\n                                <label htmlFor=\"switch_right\">Sell</label>\r\n                            </form>\r\n                        </div>\r\n                        <div className=\"col-md\">\r\n                            <form className=\"switch-field direction\">\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    id=\"switch_direction_to\"\r\n                                    name=\"switchToggle\"\r\n                                    value=\"from\"\r\n                                    onChange={this.toggleDirection}\r\n                                    checked={this.state.direction==='from'}\r\n                                />\r\n                                <label htmlFor=\"switch_direction_to\"><i className=\"fa fa-exchange\"></i>{this.props.fSym}</label>\r\n                                <input\r\n                                    type=\"radio\"\r\n                                    id=\"switch_direction_from\"\r\n                                    name=\"switchToggle\"\r\n                                    value=\"to\"\r\n                                    onChange={this.toggleDirection}\r\n                                    checked={this.state.direction==='to'}\r\n                                />\r\n                                <label htmlFor=\"switch_direction_from\"><i className=\"fa fa-exchange\"></i>{this.props.tSym}</label>\r\n                            </form>\r\n                            <input className=\"form-control price-impact\" type=\"text\" value={this.state.priceImpactVolume} onChange={this.handleChange}/>\r\n                        </div>\r\n                        <div className=\"col-md\">\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md col-stat\">\r\n                            <div className=\"stat-wrapper\">\r\n                                <div className=\"stat-label\">\r\n                                    10% Bid Depth\r\n                                </div>\r\n                                <div className=\"stat-data\">\r\n                                    {this.props.fSym} {utils.formatNumber(this.stats.depth[this.state.toggle].from, 2, true)}\r\n                                    ( {this.props.tSym} {utils.formatNumber(this.stats.depth[this.state.toggle].to, 2, true)} )\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md col-stat\">\r\n                            <div className=\"stat-wrapper\">\r\n                                <div className=\"stat-label\">\r\n                                    Price Impact\r\n                                </div>\r\n                                <div className={`stat-data ${this.stats.impact[this.state.toggle] >= 0 ? 'up-text' : 'down-text'}`}>\r\n                                    {this.props.tSym} {utils.formatNumber(this.stats.impact[this.state.toggle], 6, true)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md col-stat\">\r\n                            <div className=\"stat-wrapper\">\r\n                                <div className=\"stat-label\">\r\n                                    Price Impact %\r\n                                </div>\r\n                                <div className={`stat-data ${this.stats.impact[this.state.toggle] >= 0 ? 'up-text' : 'down-text'}`}>\r\n                                    { utils.formatNumber((this.stats.impact[this.state.toggle] / this.stats.spread.midpoint) * 100, 3, true) || 0 }%\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md\">\r\n                            <div className=\"stat-wrapper\">\r\n                                <div className=\"stat-label\">\r\n                                    Average Price\r\n                                </div>\r\n                                <div className=\"stat-data\">\r\n                                    {this.props.tSym} {utils.formatNumber(this.stats.impact.average[this.state.toggle], 2, true)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                        <div className={\"col-md\"}>\r\n                        </div>\r\n                        <div className=\"col-md\">\r\n                            Highest bid: <span className={\"up-text\"}>{utils.formatNumber(this.stats.spread.high, 2, true)}</span>\r\n                        </div>\r\n                        <div className=\"col-md\">\r\n                            <div>\r\n                                Midpoint: {utils.formatNumber(this.stats.spread.midpoint, 3, true)}\r\n                            </div>\r\n                            <div>\r\n                                Spread: {utils.formatNumber(this.stats.spread.low - this.stats.spread.high, 3, true)}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"col-md\">\r\n                            Lowest ask: <span className={\"down-text\"}>{utils.formatNumber(this.stats.spread.low, 2, true)}</span>\r\n                        </div>\r\n                        <div className={\"col-md\"}>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nStats.propTypes = {\r\n    orders: PropTypes.object.isRequired,\r\n    fSym: PropTypes.string.isRequired,\r\n    tSym: PropTypes.string.isRequired,\r\n};\r\n\r\nexport { Stats };","import React, { Component } from \"react\";\r\nimport { Utils } from '../../services/Utils';\r\nimport PropTypes from 'prop-types';\r\nconst utils = new Utils();\r\n\r\nclass OrderRow extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if(!this.updated && this.props.lastUpdated.indexOf(Number(this.props.order.value)) !== -1){\r\n            this.updated = true;\r\n            let c = this;\r\n            setTimeout(function(){\r\n                c.updated = false;\r\n            }, 100);\r\n        }\r\n        this.price = this.props.order.value;\r\n        this.volume = this.props.order.bidsvolume || this.props.order.asksvolume;\r\n        this.tsymPrice = this.props.order.value * (this.props.order.bidsvolume || this.props.order.asksvolume || 0)\r\n        this.totalVolume = this.props.order.bidstotalvolume || this.props.order.askstotalvolume;\r\n        return (\r\n\r\n            <div className={\r\n                `row data-row ${this.updated ? 'highlight' : ''}`\r\n                }>\r\n                <div className=\"col-md\">\r\n                    {utils.formatNumber(this.price, this.price > 1 ? 4 : 8, true)}\r\n                </div>\r\n                <div className=\"col-md\">\r\n                    {utils.formatNumber(this.volume, 4, true)}\r\n                </div>\r\n                <div className=\"col-md\">\r\n                    {utils.formatNumber(this.tsymPrice, 4, true)}\r\n                </div>\r\n                <div className=\"col-md\">\r\n                    {utils.formatNumber(this.totalVolume['from'],2, true)}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nOrderRow.propTypes = {\r\n    lastUpdated: PropTypes.array.isRequired,\r\n    order: PropTypes.object.isRequired,\r\n};\r\n\r\nexport { OrderRow };","import React, { Component } from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport Infinite from 'react-infinite';\r\nimport {OrderRow} from './OrderRow';\r\nimport { Utils } from '../../services/Utils';\r\nconst utils = new Utils();\r\n\r\nclass OrderTable extends Component {\r\n\r\n    getTableRows(props) {\r\n        return this.props.keys.map((key) => {\r\n            return (\r\n                <OrderRow lastUpdated={props.lastUpdated} order={props.orders[key]} key={key}/>\r\n            )\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let totalVolume;\r\n        if(!this.props.orders || !this.props.keys.length){\r\n            return <div/>\r\n        }\r\n        if(this.props.title === 'Buy'){\r\n            totalVolume = {\r\n                to: this.props.orders[this.props.keys[this.props.keys.length-1]].bidstotalvolume.to,\r\n                from: this.props.orders[this.props.keys[this.props.keys.length-1]].bidstotalvolume.from\r\n            };\r\n        } else {\r\n            totalVolume = {\r\n                to: this.props.orders[this.props.keys[this.props.keys.length-1]].askstotalvolume.to,\r\n                from: this.props.orders[this.props.keys[this.props.keys.length-1]].askstotalvolume.from\r\n            };\r\n        }\r\n        return (\r\n        <div>\r\n            <div className={\"row\"}>\r\n                <div className=\"col-md\">\r\n                    {this.props.fSym} {utils.formatNumber(totalVolume.to, 2, true)}\r\n                </div>\r\n                <div className=\"col-md\">\r\n                    <h4>{this.props.title}</h4>\r\n                </div>\r\n                <div className=\"col-md\">\r\n                    {this.props.tSym} {utils.formatNumber(totalVolume.from, 2, true)}\r\n                </div>\r\n            </div>\r\n            <div className=\"orderbook\">\r\n                <div className=\"row title-row\">\r\n                    <div className=\"col-md\">\r\n                        Price\r\n                    </div>\r\n                    <div className=\"col-md\">\r\n                        {this.props.fSym}\r\n                    </div>\r\n                    <div className=\"col-md\">\r\n                        {this.props.tSym}\r\n                    </div>\r\n                    <div className=\"col-md\">\r\n                        Sum({this.props.tSym})\r\n                    </div>\r\n                </div>\r\n                <Infinite containerHeight={400} elementHeight={21}>\r\n                    {this.getTableRows(this.props)}\r\n                </Infinite>\r\n            </div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\nOrderTable.propTypes = {\r\n    title: PropTypes.string.isRequired,\r\n    fSym: PropTypes.string.isRequired,\r\n    tSym: PropTypes.string.isRequired,\r\n    keys: PropTypes.array.isRequired,\r\n    orders: PropTypes.object.isRequired\r\n};\r\n\r\nexport { OrderTable };","import React, { Component} from 'react';\r\nimport {Stats} from './Stats';\r\nimport {OrderTable} from './OrderTable';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Display extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            orders: [],\r\n            lastUpdated: [],\r\n        };\r\n    }\r\n\r\n    render() {\r\n        if(!Object.keys(this.props.orders).length){\r\n            return <div/>;\r\n        }\r\n        let bidKeys = Object.keys(this.props.orders[0]);\r\n        let askKeys = Object.keys(this.props.orders[1]);\r\n        bidKeys.sort(function(a,b){return b-a});\r\n        askKeys.sort(function(a,b){return a-b});\r\n        return (\r\n            <div className=\"container\">\r\n                <Stats fSym={this.props.fSym} tSym={this.props.tSym} orders={this.props.orders}></Stats>\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-6\">\r\n                        <OrderTable\r\n                            fSym={this.props.fSym}\r\n                            tSym={this.props.tSym}\r\n                            orders={this.props.orders[0]}\r\n                            keys={bidKeys}\r\n                            lastUpdated={this.props.lastUpdated}\r\n                            title='Buy' />\r\n                    </div>\r\n                    <div className=\"col-md-6\">\r\n                        <OrderTable\r\n                            fSym={this.props.fSym}\r\n                            tSym={this.props.tSym}\r\n                            orders={this.props.orders[1]}\r\n                            keys={askKeys}\r\n                            lastUpdated={this.props.lastUpdated}\r\n                            title='Sell'/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nDisplay.propTypes = {\r\n    orders: PropTypes.object.isRequired,\r\n    keys: PropTypes.array,\r\n    lastUpdated: PropTypes.array.isRequired,\r\n    fSym: PropTypes.string.isRequired,\r\n    tSym: PropTypes.string.isRequired,\r\n};\r\n\r\nexport { Display };","import React, { Component } from 'react';\r\nimport { Subscription } from './Subscription';\r\nimport { Display } from './Display';\r\nimport { OrderbookService } from '../../services/OrderbookService';\r\nimport PropTypes from 'prop-types';\r\nconst orderbookService = new OrderbookService();\r\n\r\nclass OrderbookStreamer extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.changeSubscription = this.changeSubscription.bind(this);\r\n        this.state = {\r\n            orders: {},\r\n            lastUpdated: [],\r\n            exchange: props.exchange,\r\n            fSym: props.fSym,\r\n            tSym: props.tSym,\r\n            apiKey: props.apiKey\r\n        };\r\n        let currentComponent = this;\r\n         setInterval(function(){\r\n            currentComponent.setState(prevState => {\r\n                return { orders: orderbookService.getSnapshot(), lastUpdated: orderbookService.getLastUpdated() }\r\n            });\r\n            orderbookService.resetLastUpdated();\r\n        }, 150);\r\n    }\r\n\r\n    subscribe(exchange, fSym, tSym, url, apiKey){\r\n        let currentComponent = this;\r\n        currentComponent.callback = (data) => {\r\n            this.setState(prevState => {\r\n                return {orders: data.orders,\r\n                    lastUpdated: orderbookService.getLastUpdated()};\r\n            });\r\n            orderbookService.resetLastUpdated();\r\n        }\r\n        orderbookService.subscribe( exchange, fSym, tSym, url, apiKey, currentComponent.callback );\r\n    }\r\n\r\n    changeSubscription(subscriptionKey, url, apiKey){\r\n        let parts = subscriptionKey.split('~');\r\n        let exchange = parts[0];\r\n        let fSym = parts[1];\r\n        let tSym = parts[2];\r\n        orderbookService.unsubscribe();\r\n        this.setState({\r\n            exchange: exchange,\r\n            fSym: fSym,\r\n            tSym: tSym,\r\n        });\r\n        this.subscribe(exchange, fSym, tSym, url, apiKey);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <Subscription\r\n                    subscribe={this.changeSubscription}\r\n                    clientUrl={orderbookService.clientUrl}\r\n                    apiKey={this.state.apiKey}\r\n                    exchange={this.state.exchange}\r\n                    fSym={this.state.fSym}\r\n                    tSym={this.state.tSym}\r\n                    autoSubscribe={this.props.autoSubscribe}\r\n                />\r\n                <Display\r\n                    fSym={this.state.fSym}\r\n                    tSym={this.state.tSym}\r\n                    orders={this.state.orders}\r\n                    lastUpdated={this.state.lastUpdated}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nOrderbookStreamer.propTypes = {\r\n    exchange: PropTypes.string.isRequired,\r\n    fSym: PropTypes.string.isRequired,\r\n    tSym: PropTypes.string.isRequired,\r\n};\r\n\r\nexport { OrderbookStreamer };","import React from 'react';\r\nimport { Header } from './components/Header';\r\nimport { OrderbookStreamer } from \"./components/OrderbookStreamer/OrderbookStreamer\";\r\nimport './App.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nfunction App() {\r\n\r\n    let search = window.location.search;\r\n    let params = new URLSearchParams(search);\r\n    let exchange = params.get('e') || 'Binance';\r\n    let fSym = params.get('fsym') || 'ETH';\r\n    let tSym = params.get('tsym') || 'USDT';\r\n    let apiKey = params.get('apikey') || 'df1c3574c94e2c8e04a8c74b07a60b6d2e0279f5a209d81c80973d7bffdd3908';\r\n    let subscribe = params.get('subscribe') || false;\r\n\r\n    return (\r\n        <div className=\"App\">\r\n            <Header title='CryptoCompare Orderbook L2 Streamer' />\r\n            <OrderbookStreamer exchange={exchange} fSym={fSym} tSym={tSym} apiKey={apiKey} autoSubscribe={subscribe}/>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}